<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            min-height: 100vh;
        }
        .login-container { 
            max-width: 400px; 
            margin: 5% auto; 
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.3); 
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .portal { 
            display: none; 
            padding: 20px; 
            animation: fadeIn 0.5s ease-in-out;
        }
        .menu { 
            display: flex; 
            justify-content: center; 
            flex-wrap: wrap; 
            gap: 15px; 
            margin-bottom: 30px; 
        }
        .menu button { 
            background: linear-gradient(45deg, #007bff, #0056b3); 
            color: white; 
            border: none; 
            padding: 12px 25px; 
            border-radius: 25px; 
            cursor: pointer; 
            transition: all 0.3s ease; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .menu button:hover { 
            background: linear-gradient(45deg, #0056b3, #004085); 
            transform: translateY(-2px); 
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        .section { 
            display: none; 
            background: white; 
            padding: 25px; 
            border-radius: 15px; 
            box-shadow: 0 8px 25px rgba(0,0,0,0.15); 
            margin-bottom: 20px; 
            animation: fadeIn 0.5s ease-in-out;
        }
        .admin-controls { display: none; }
        .user-view { display: none; }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-top: 20px; 
            border-radius: 10px; 
            overflow: hidden; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        th, td { 
            border: 1px solid #ddd; 
            padding: 12px; 
            text-align: left; 
        }
        th { 
            background: linear-gradient(45deg, #f8f9fa, #e9ecef); 
            font-weight: bold; 
            color: #495057;
        }
        tbody tr:hover { background-color: #f1f3f4; }
        .btn-sm { 
            margin: 2px; 
            border-radius: 5px;
        }
        .logout-btn { 
            position: fixed; 
            bottom: 20px; 
            right: 20px; 
            z-index: 1000;
        }
        .no-data { 
            text-align: center; 
            color: #6c757d; 
            font-style: italic; 
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <h2 class="text-center mb-4"><i class="fas fa-school"></i> Piran Ghaib School Data</h2>
        <form id="loginForm">
            <div class="mb-3">
                <input type="password" id="password" class="form-control" placeholder="Enter Password" required>
            </div>
            <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>
        <div id="error" class="alert alert-danger mt-3" style="display: none;">Invalid password. Try 'admin123' for admin or 'user123' for user.</div>
    </div>

    <div class="portal container" id="portal">
        <h2 class="text-center mb-4"><i class="fas fa-graduation-cap"></i> Welcome to School Portal</h2>
        <p class="text-center">Role: <span id="role" class="badge bg-secondary"></span></p>
        <div class="menu">
            <button onclick="showSection('newAdmission')"><i class="fas fa-user-plus"></i> New Admission</button>
            <button onclick="showSection('remainingAdmission')"><i class="fas fa-clock"></i> Remaining Admission</button>
            <button onclick="showSection('teacherSalary')"><i class="fas fa-money-bill-wave"></i> Teacher Salary</button>
            <button onclick="showSection('skipVoucher')"><i class="fas fa-receipt"></i> Skip Voucher Students</button>
        </div>

        <div class="section" id="newAdmission">
            <h3><i class="fas fa-user-plus"></i> New Admission Details</h3>
            <div class="admin-controls">
                <form id="admissionForm" class="mb-4">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Student Name:</label>
                            <input type="text" id="studentName" class="form-control" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label>Father Name:</label>
                            <input type="text" id="fatherName" class="form-control" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label>Class:</label>
                            <select id="class" class="form-control" required>
                                <option value="">Select Class</option>
                                <option value="P.G">P.G</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label>Amount:</label>
                            <input type="number" id="amount" class="form-control" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label>Remaining Amount:</label>
                            <input type="number" id="remainingAmount" class="form-control" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label>Fee Months Paid:</label>
                        <select id="feeMonths" class="form-control" multiple required>
                            <option value="January">January</option>
                            <option value="February">February</option>
                            <option value="March">March</option>
                            <option value="April">April</option>
                            <option value="May">May</option>
                            <option value="June">June</option>
                            <option value="July">July</option>
                            <option value="August">August</option>
                            <option value="September">September</option>
                            <option value="October">October</option>
                            <option value="November">November</option>
                            <option value="December">December</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label>Year:</label>
                        <select id="admissionYear" class="form-control" required>
                            <option value="">Select Year</option>
                            <option value="2020">2020</option>
                            <option value="2021">2021</option>
                            <option value="2022">2022</option>
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                            <option value="2028">2028</option>
                            <option value="2029">2029</option>
                            <option value="2030">2030</option>
                            <option value="2031">2031</option>
                            <option value="2032">2032</option>
                            <option value="2033">2033</option>
                            <option value="2034">2034</option>
                            <option value="2035">2035</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label>Date:</label>
                        <input type="date" id="date" class="form-control" required>
                    </div>
                    <div class="mb-3">
                        <label>Admission Type:</label><br>
                        <input type="checkbox" id="fullPaid" name="admissionType"> Full Admission Paid<br>
                        <input type="checkbox" id="remaining" name="admissionType"> Remaining Admission
                    </div>
                    <button type="submit" class="btn btn-success">Save Admission</button>
                </form>
                <h4>Admission List</h4>
                <table id="admissionTable">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Father Name</th>
                            <th>Class</th>
                            <th>Amount</th>
                            <th>Remaining</th>
                            <th>Fee Months</th>
                            <th>Year</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="user-view">
                <h4>New Admission List</h4>
                <table id="admissionUserTable">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Father Name</th>
                            <th>Class</th>
                            <th>Amount</th>
                            <th>Remaining</th>
                            <th>Fee Months</th>
                            <th>Year</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="section" id="remainingAdmission">
            <h3><i class="fas fa-clock"></i> Remaining Admission Details</h3>
            <div class="admin-controls">
                <form id="remainingAdmissionForm" class="mb-4">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Student Name:</label>
                            <input type="text" id="remStudentName" class="form-control" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label>Father Name:</label>
                            <input type="text" id="remFatherName" class="form-control" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label>Class:</label>
                            <select id="remClass" class="form-control" required>
                                <option value="">Select Class</option>
                                <option value="P.G">P.G</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label>Remaining Amount:</label>
                            <input type="number" id="remRemainingAmount" class="form-control" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label>Admission Date:</label>
                            <input type="date" id="remAdmissionDate" class="form-control" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success">Save Remaining Admission</button>
                </form>
                <h4>Remaining Admission List</h4>
                <table id="remainingAdmissionTable">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Father Name</th>
                            <th>Class</th>
                            <th>Remaining Amount</th>
                            <th>Admission Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="user-view">
                <h4>Remaining Admission List</h4>
                <table id="remainingAdmissionUserTable">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Father Name</th>
                            <th>Class</th>
                            <th>Remaining Amount</th>
                            <th>Admission Date</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="section" id="teacherSalary">
            <h3><i class="fas fa-money-bill-wave"></i> Teacher Salary Details</h3>
            <div class="admin-controls">
                <form id="teacherSalaryForm" class="mb-4">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Teacher Name:</label>
                            <input type="text" id="teacherName" class="form-control" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label>Salary Deduct Amount:</label>
                            <input type="number" id="salaryDeductAmount" class="form-control" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Joining Date:</label>
                            <input type="date" id="joiningDate" class="form-control" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label>Months:</label>
                            <select id="salaryMonths" class="form-control" multiple required>
                                <option value="January">January</option>
                                <option value="February">February</option>
                                <option value="March">March</option>
                                <option value="April">April</option>
                                <option value="May">May</option>
                                <option value="June">June</option>
                                <option value="July">July</option>
                                <option value="August">August</option>
                                <option value="September">September</option>
                                <option value="October">October</option>
                                <option value="November">November</option>
                                <option value="December">December</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label>Year:</label>
                        <select id="salaryYear" class="form-control" required>
                            <option value="">Select Year</option>
                            <option value="2020">2020</option>
                            <option value="2021">2021</option>
                            <option value="2022">2022</option>
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                            <option value="2028">2028</option>
                            <option value="2029">2029</option>
                            <option value="2030">2030</option>
                            <option value="2031">2031</option>
                            <option value="2032">2032</option>
                            <option value="2033">2033</option>
                            <option value="2034">2034</option>
                            <option value="2035">2035</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-success">Save Teacher Salary Details</button>
                </form>
                <h4>Teacher Salary List</h4>
                <table id="teacherSalaryTable">
                    <thead>
                        <tr>
                            <th>Teacher Name</th>
                            <th>Salary Deduct Amount</th>
                            <th>Joining Date</th>
                            <th>Months</th>
                            <th>Year</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="user-view">
                <h4>Teacher Salary List</h4>
                <table id="teacherSalaryUserTable">
                    <thead>
                        <tr>
                            <th>Teacher Name</th>
                            <th>Salary Deduct Amount</th>
                            <th>Joining Date</th>
                            <th>Months</th>
                            <th>Year</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="section" id="skipVoucher">
            <h3><i class="fas fa-receipt"></i> Skip Voucher Students Details</h3>
                        <div class="admin-controls">
                <form id="skipVoucherForm" class="mb-4">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Student Name:</label>
                            <input type="text" id="svStudentName" class="form-control" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label>Father Name:</label>
                            <input type="text" id="svFatherName" class="form-control" required>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label>Class:</label>
                            <select id="svClass" class="form-control" required>
                                <option value="">Select Class</option>
                                <option value="P.G">P.G</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                            </select>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label>Reason:</label>
                            <input type="text" id="svReason" class="form-control" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success">Save Skip Voucher Student</button>
                </form>
                <h4>Skip Voucher Students List</h4>
                <table id="skipVoucherTable">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Father Name</th>
                            <th>Class</th>
                            <th>Reason</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="user-view">
                <h4>Skip Voucher Students List</h4>
                <table id="skipVoucherUserTable">
                    <thead>
                        <tr>
                            <th>Student Name</th>
                            <th>Father Name</th>
                            <th>Class</th>
                            <th>Reason</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <button onclick="logout()" class="btn btn-danger logout-btn">Logout</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const adminPassword = 'admin123';
        const userPassword = 'user123';
        let currentRole = '';

        // Load data from localStorage
        let admissions = JSON.parse(localStorage.getItem('admissions')) || [];
        let remainingAdmissions = JSON.parse(localStorage.getItem('remainingAdmissions')) || [];
        let teacherSalaries = JSON.parse(localStorage.getItem('teacherSalaries')) || [];
        let skipVouchers = JSON.parse(localStorage.getItem('skipVouchers')) || [];

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('password').value;
            if (password === adminPassword) {
                currentRole = 'Admin';
                showPortal();
                showAdminControls();
            } else if (password === userPassword) {
                currentRole = 'User';
                showPortal();
                showUserViews();
            } else {
                document.getElementById('error').style.display = 'block';
            }
        });

        function showPortal() {
            document.getElementById('portal').style.display = 'block';
            document.querySelector('.login-container').style.display = 'none';
            document.getElementById('role').textContent = currentRole;
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
            document.getElementById(sectionId).style.display = 'block';
            loadData(sectionId);
        }

        function showAdminControls() {
            document.querySelectorAll('.admin-controls').forEach(c => c.style.display = 'block');
        }

        function showUserViews() {
            document.querySelectorAll('.user-view').forEach(v => v.style.display = 'block');
        }

        function logout() {
            location.reload();
        }

        // Admissions
        document.getElementById('admissionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const feeMonthsSelect = document.getElementById('feeMonths');
            const selectedMonths = Array.from(feeMonthsSelect.selectedOptions).map(option => option.value);
            const data = {
                studentName: document.getElementById('studentName').value,
                fatherName: document.getElementById('fatherName').value,
                class: document.getElementById('class').value,
                amount: document.getElementById('amount').value,
                remainingAmount: document.getElementById('remainingAmount').value,
                feeMonths: selectedMonths.join(', '),
                year: document.getElementById('admissionYear').value,
                date: document.getElementById('date').value
            };
            const fullPaid = document.getElementById('fullPaid').checked;
            const remaining = document.getElementById('remaining').checked;
            if (fullPaid) {
                admissions.push(data);
                localStorage.setItem('admissions', JSON.stringify(admissions));
                loadAdmissions();
            }
            if (remaining) {
                const remData = {
                    studentName: data.studentName,
                    fatherName: data.fatherName,
                    class: data.class,
                    remainingAmount: data.remainingAmount,
                    admissionDate: data.date
                };
                remainingAdmissions.push(remData);
                localStorage.setItem('remainingAdmissions', JSON.stringify(remainingAdmissions));
                loadRemainingAdmissions();
            }
            this.reset();
        });

        function loadAdmissions() {
            const tbody = document.querySelector('#admissionTable tbody');
            tbody.innerHTML = '';
            const userTbody = document.querySelector('#admissionUserTable tbody');
            userTbody.innerHTML = '';
            if (admissions.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9" class="no-data">No data available.</td></tr>';
                userTbody.innerHTML = '<tr><td colspan="8" class="no-data">No data available.</td></tr>';
                return;
            }
            admissions.forEach((ad, index) => {
                const row = `<tr>
                    <td>${ad.studentName}</td>
                    <td>${ad.fatherName}</td>
                    <td>${ad.class}</td>
                    <td>${ad.amount}</td>
                    <td>${ad.remainingAmount}</td>
                    <td>${ad.feeMonths}</td>
                    <td>${ad.year}</td>
                    <td>${formatDate(ad.date)}</td>
                    <td>
                        ${currentRole === 'Admin' ? `<button class="btn btn-warning btn-sm" onclick="editAdmission(${index})">Edit</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteAdmission(${index})">Delete</button>` : ''}
                    </td>
                </tr>`;
                tbody.innerHTML += row;
                const userRow = `<tr>
                    <td>${ad.studentName}</td>
                    <td>${ad.fatherName}</td>
                    <td>${ad.class}</td>
                    <td>${ad.amount}</td>
                    <td>${ad.remainingAmount}</td>
                    <td>${ad.feeMonths}</td>
                    <td>${ad.year}</td>
                    <td>${formatDate(ad.date)}</td>
                </tr>`;
                userTbody.innerHTML += userRow;
            });
        }

        function editAdmission(index) {
            const ad = admissions[index];
            document.getElementById('studentName').value = ad.studentName;
            document.getElementById('fatherName').value = ad.fatherName;
            document.getElementById('class').value = ad.class;
            document.getElementById('amount').value = ad.amount;
            document.getElementById('remainingAmount').value = ad.remainingAmount;
            document.getElementById('admissionYear').value = ad.year;
            document.getElementById('date').value = ad.date;
            // Set selected months
            const feeMonthsSelect = document.getElementById('feeMonths');
            const selectedMonths = ad.feeMonths.split(', ').filter(m => m);
            Array.from(feeMonthsSelect.options).forEach(option => {
                option.selected = selectedMonths.includes(option.value);
            });
            admissions.splice(index, 1);
            localStorage.setItem('admissions', JSON.stringify(admissions));
        }

        function deleteAdmission(index) {
            admissions.splice(index, 1);
            localStorage.setItem('admissions', JSON.stringify(admissions));
            loadAdmissions();
        }

        // Remaining Admissions
        document.getElementById('remainingAdmissionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                studentName: document.getElementById('remStudentName').value,
                fatherName: document.getElementById('remFatherName').value,
                class: document.getElementById('remClass').value,
                remainingAmount: document.getElementById('remRemainingAmount').value,
                admissionDate: document.getElementById('remAdmissionDate').value
            };
            remainingAdmissions.push(data);
            localStorage.setItem('remainingAdmissions', JSON.stringify(remainingAdmissions));
            loadRemainingAdmissions();
            this.reset();
        });

        function loadRemainingAdmissions() {
            const tbody = document.querySelector('#remainingAdmissionTable tbody');
            tbody.innerHTML = '';
            const userTbody = document.querySelector('#remainingAdmissionUserTable tbody');
            userTbody.innerHTML = '';
            if (remainingAdmissions.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="no-data">No data available.</td></tr>';
                userTbody.innerHTML = '<tr><td colspan="5" class="no-data">No data available.</td></tr>';
                return;
            }
            remainingAdmissions.forEach((ad, index) => {
                const row = `<tr>
                    <td>${ad.studentName}</td>
                    <td>${ad.fatherName}</td>
                    <td>${ad.class}</td>
                    <td>${ad.remainingAmount}</td>
                    <td>${formatDate(ad.admissionDate)}</td>
                    <td>
                        ${currentRole === 'Admin' ? `<button class="btn btn-warning btn-sm" onclick="editRemainingAdmission(${index})">Edit</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteRemainingAdmission(${index})">Delete</button>` : ''}
                    </td>
                </tr>`;
                tbody.innerHTML += row;
                const userRow = `<tr>
                    <td>${ad.studentName}</td>
                    <td>${ad.fatherName}</td>
                    <td>${ad.class}</td>
                    <td>${ad.remainingAmount}</td>
                    <td>${formatDate(ad.admissionDate)}</td>
                </tr>`;
                userTbody.innerHTML += userRow;
            });
        }

        function editRemainingAdmission(index) {
            const ad = remainingAdmissions[index];
            document.getElementById('remStudentName').value = ad.studentName;
            document.getElementById('remFatherName').value = ad.fatherName;
            document.getElementById('remClass').value = ad.class;
            document.getElementById('remRemainingAmount').value = ad.remainingAmount;
            document.getElementById('remAdmissionDate').value = ad.admissionDate;
            remainingAdmissions.splice(index, 1);
            localStorage.setItem('remainingAdmissions', JSON.stringify(remainingAdmissions));
        }

        function deleteRemainingAdmission(index) {
            remainingAdmissions.splice(index, 1);
            localStorage.setItem('remainingAdmissions', JSON.stringify(remainingAdmissions));
            loadRemainingAdmissions();
        }

        // Teacher Salaries
        document.getElementById('teacherSalaryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const salaryMonthsSelect = document.getElementById('salaryMonths');
            const selectedMonths = Array.from(salaryMonthsSelect.selectedOptions).map(option => option.value);
            const data = {
                teacherName: document.getElementById('teacherName').value,
                salaryDeductAmount: document.getElementById('salaryDeductAmount').value,
                joiningDate: document.getElementById('joiningDate').value,
                months: selectedMonths.join(', '),
                year: document.getElementById('salaryYear').value
            };
            teacherSalaries.push(data);
            localStorage.setItem('teacherSalaries', JSON.stringify(teacherSalaries));
            loadTeacherSalaries();
            this.reset();
        });

        function loadTeacherSalaries() {
            const tbody = document.querySelector('#teacherSalaryTable tbody');
            tbody.innerHTML = '';
            const userTbody = document.querySelector('#teacherSalaryUserTable tbody');
            userTbody.innerHTML = '';
            if (teacherSalaries.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="no-data">No data available.</td></tr>';
                userTbody.innerHTML = '<tr><td colspan="5" class="no-data">No data available.</td></tr>';
                return;
            }
            teacherSalaries.forEach((ts, index) => {
                const row = `<tr>
                    <td>${ts.teacherName}</td>
                    <td>${ts.salaryDeductAmount}</td>
                    <td>${formatDate(ts.joiningDate)}</td>
                    <td>${ts.months}</td>
                    <td>${ts.year}</td>
                    <td>
                        ${currentRole === 'Admin' ? `<button class="btn btn-warning btn-sm" onclick="editTeacherSalary(${index})">Edit</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteTeacherSalary(${index})">Delete</button>` : ''}
                    </td>
                </tr>`;
                tbody.innerHTML += row;
                const userRow = `<tr>
                    <td>${ts.teacherName}</td>
                    <td>${ts.salaryDeductAmount}</td>
                    <td>${formatDate(ts.joiningDate)}</td>
                    <td>${ts.months}</td>
                    <td>${ts.year}</td>
                </tr>`;
                userTbody.innerHTML += userRow;
            });
        }

        function editTeacherSalary(index) {
            const ts = teacherSalaries[index];
            document.getElementById('teacherName').value = ts.teacherName;
            document.getElementById('salaryDeductAmount').value = ts.salaryDeductAmount;
            document.getElementById('joiningDate').value = ts.joiningDate;
            document.getElementById('salaryYear').value = ts.year;
            // Set selected months
            const salaryMonthsSelect = document.getElementById('salaryMonths');
            const selectedMonths = ts.months.split(', ').filter(m => m);
            Array.from(salaryMonthsSelect.options).forEach(option => {
                option.selected = selectedMonths.includes(option.value);
            });
            teacherSalaries.splice(index, 1);
            localStorage.setItem('teacherSalaries', JSON.stringify(teacherSalaries));
        }

        function deleteTeacherSalary(index) {
            teacherSalaries.splice(index, 1);
            localStorage.setItem('teacherSalaries', JSON.stringify(teacherSalaries));
            loadTeacherSalaries();
        }

        // Skip Vouchers
        document.getElementById('skipVoucherForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const data = {
                studentName: document.getElementById('svStudentName').value,
                fatherName: document.getElementById('svFatherName').value,
                class: document.getElementById('svClass').value,
                reason: document.getElementById('svReason').value
            };
            skipVouchers.push(data);
            localStorage.setItem('skipVouchers', JSON.stringify(skipVouchers));
            loadSkipVouchers();
            this.reset();
        });

        function loadSkipVouchers() {
            const tbody = document.querySelector('#skipVoucherTable tbody');
            tbody.innerHTML = '';
            const userTbody = document.querySelector('#skipVoucherUserTable tbody');
            userTbody.innerHTML = '';
            if (skipVouchers.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" class="no-data">No data available.</td></tr>';
                userTbody.innerHTML = '<tr><td colspan="4" class="no-data">No data available.</td></tr>';
                return;
            }
            skipVouchers.forEach((sv, index) => {
                const row = `<tr>
                    <td>${sv.studentName}</td>
                    <td>${sv.fatherName}</td>
                    <td>${sv.class}</td>
                    <td>${sv.reason}</td>
                    <td>
                        ${currentRole === 'Admin' ? `<button class="btn btn-warning btn-sm" onclick="editSkipVoucher(${index})">Edit</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteSkipVoucher(${index})">Delete</button>` : ''}
                    </td>
                </tr>`;
                tbody.innerHTML += row;
                const userRow = `<tr>
                    <td>${sv.studentName}</td>
                    <td>${sv.fatherName}</td>
                    <td>${sv.class}</td>
                    <td>${sv.reason}</td>
                </tr>`;
                userTbody.innerHTML += userRow;
            });
        }

        function editSkipVoucher(index) {
            const sv = skipVouchers[index];
            document.getElementById('svStudentName').value = sv.studentName;
            document.getElementById('svFatherName').value = sv.fatherName;
            document.getElementById('svClass').value = sv.class;
            document.getElementById('svReason').value = sv.reason;
            skipVouchers.splice(index, 1);
            localStorage.setItem('skipVouchers', JSON.stringify(skipVouchers));
        }

        function deleteSkipVoucher(index) {
            skipVouchers.splice(index)}
                </script>
</body>
</html>